/*  AppShouldTerminate*/void local fn BuildWindowwindow 1, @"AppShouldTerminate Demo", (0,0,550,400), NSWindowStyleMaskTitledbutton 1,,, @"Quit"ControlSetAction( 1, @"terminate:" )end fnvoid local fn DoAppEvent( ev as long )select (ev)case _appDidFinishLaunchingfn BuildWindowcase _appShouldTerminateAppEventSetLong( NSTerminateLater )alert -1,, @"Do you really want to quit this app?",, @"Quit;Don't Quit"AlertButtonSetKeyEquivalent( 1, 1, @"\e" )alert 1end selectend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _alertDidEndselect ( tag )case NSAlertFirstButtonReturnAppReplyToApplicationShouldTerminate( YES )case elseAppReplyToApplicationShouldTerminate( NO )end selectend selectend fnon AppEvent fn DoAppEventon dialog fn DoDialogHandleEvents