/*  AppShouldTerminate*/void local fn BuildWindowwindow 1, @"AppShouldTerminate Demo", (0,0,550,400), NSWindowStyleMaskTitledbutton 1,,, @"Quit"ControlSetAction( 1, @"terminate:" )end fnvoid local fn DoAppEvent( ev as long )long resultselect (ev)case _appDidFinishLaunchingfn BuildWindowcase _appShouldTerminatealert -1,, @"Do you really want to quit this app?",, @"Quit;Don't Quit"AlertButtonSetKeyEquivalent( 1, 1, @"\e" )result = alert 1if ( result != NSAlertFirstButtonReturn ) then AppEventSetLong( NSTerminateCancel )end selectend fnon AppEvent fn DoAppEventHandleEvents