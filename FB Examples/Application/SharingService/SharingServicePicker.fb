/*  SharingServicePicker*/_window =1begin enum 1_infoLabel_sharingBtn_textLabel_scrollView_textView_imageLabel_imageViewend enumvoid local fn ShowPicker( tag as long )CFStringRef string = fn TextString( _textView )ImageRef image = fn ImageViewImage( _imageView )CFMutableArrayRef items = fn MutableArrayWithCapacity(0)MutableArrayAddObject( items, string)if ( image ) then MutableArrayAddObject( items, image )SharingServicePickerRef ref = fn SharingServicePickerWithItems( items )SharingServicePickerShowRelativeToRect( ref, CGRectZero, tag, CGRectMinYEdge )end fnvoid local fn BuildWindowwindow _window, @"SharingServicePicker",  (0,0,533,278), NSWindowStyleMaskTitledtextlabel _infoLabel, @"Enter text and/or drop an image onto the well.", (18,250,500,17)button _sharingBtn,,, @"", ( 483,228,30,30),, NSBezelStyleRegularSquareButtonSetImage( _sharingBtn, NSImageNameShareTemplate )ControlSendActionOn( _sharingBtn, NSEventMaskLeftMouseDown )// trigger _btnClick on mouse downtextlabel _textLabel, @"Text:", (18,216,34,16)ControlSetSize( _textLabel, NSControlSizeSmall )scrollview _scrollView, (20,20,288,194), NSBezelBordertextview _textView,, _scrollViewTextSetString( _textView, @"Type something..." )textlabel _imageLabel, @"Image:", (314,216,45,16)ControlSetSize( _imageLabel, NSControlSizeSmall )imageView _imageView,, NSImageNameColorPanel, (313,19,196,196)ImageViewSetFrameStyle( _imageView, NSImageFrameGrayBezel )ImageViewSetEditable( _imageView, YES )							// turn on image dropViewSetFocusRingType( _imageView, NSFocusRingTypeNone )end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _sharingBtn : fn ShowPicker(tag)end selectcase _sharingServicePickerSharingServicesForItems// ...case _sharingServicePickerDidChooseSharingService// ...end selectend fneditmenu 1fn BuildWindowon dialog fn DoDialogHandleEvents