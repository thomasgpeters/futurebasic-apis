/*   ContentsOfDirectoryAtURL 2*/include "NSLog.incl"void local fn DoItCFURLRef          fileURLCFIndex           indexCFDictionaryRef   dictCFMutableArrayRef keysCFArrayRef        arrayCFIndex           countOpenPanelSetCanChooseFiles( 1, NO )OpenPanelSetCanChooseDirectories( 1, YES )CFURLRef url = openpanel 1, @"Choose directory",, @"Choose"if ( url )keys = fn MutableArrayWithCapacity( 0 )MutableArrayAddObject( keys, NSURLNameKey )MutableArrayAddObject( keys, NSURLIsDirectoryKey )MutableArrayAddObject( keys, NSURLIsExecutableKey )array = fn FileManagerContentsOfDirectoryAtURL( url, keys, NSDirectoryEnumerationSkipsHiddenFiles )count = fn ArrayCount( array )for index = 0 to count - 1fileURL = fn ArrayObjectAtIndex( array, index )dict = fn URLResourceValuesForKeys( fileURL, keys )NSLog(@"%@",dict)next indexend ifend fnfn DoItHandleEvents