//----------------------------// Demos NSPropertyListSerialization to write a smaller file from an NSArray containing a property list.// N.B. Just a quick hack to show the concept. Code is imperfect. Brian 20180501//----------------------------include "NSLog.incl"void local fn DoAppEvent( ev as long )CFArrayRef array, finalCFDataRef  outData, inDataErrorRef   err = NULLCFURLRef   desktopURL, propListURL, dataURLselect (ev)case _appDidFinishLaunchingarray = @[@{@"key1":@"value1"},@{@"key2":@"value2"}]outData = fn PropertyListSerializationDataWithPropertyList( array, NSPropertyListBinaryFormat_v1_0, @err )if ( err )NSLog(@"PropertyListSerializationDataWithPropertyList error: %@",err)elsedesktopURL = fn FileManagerURLForDirectory( NSDesktopDirectory, NSUserDomainMask )propListURL = fn URLByAppendingPathComponent( desktopURL, @"TestPropList" )fn ArrayWriteToURL( array, propListURL, NULL )dataURL = fn URLByAppendingPathComponent( desktopURL, @"TestData" )fn DataWriteToURL( outData, dataURL, 0, NULL )inData = fn DataWithContentsOfURL( dataURL, 0, NULL )final = fn PropertyListSerializationPropertyListWithData( inData, NSPropertyListImmutable, NULL, @err )NSLog(@"final: %@", final)end ifcase elseend selectend fnon AppEvent fn DoAppEventHandleEvents