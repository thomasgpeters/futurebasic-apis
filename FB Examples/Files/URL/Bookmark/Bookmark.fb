/*  Bookmark*/include "NSLog.incl"void local fn DoItCFURLRef   url// get bookmark from user defaults (prefs)CFDataRef bm = fn UserDefaultsObject( @"MyFileBookmark" )if ( bm )// bookmark existsNSLog(@"bookmark found")url = fn URLByResolvingBookmarkData( bm, 0, NULL, NULL, NULL )if ( url )NSLog(@"\rbookmark resolved")// file still existselseNSLog(@"\rbookmark not resolved")// file has gone missingend ifelseNSLog(@"bookmark not found")// bookmark doesn't exist// look for MyFile.txt in either FolderA or FolderBurl = fn URLByAppendingPathComponent( fn FileManagerURLForApplicationDirectory, @"FolderA/MyFile.txt" )if ( fn FileManagerFileExistsAtURL( url ) == NO )url = fn URLByAppendingPathComponent( fn FileManagerURLForApplicationDirectory, @"FolderB/MyFile.txt" )end ifif ( fn FileManagerFileExistsAtURL( url ) )// does file exist in FolderA or FolderBNSLog(@"\rfile found" )bm = fn URLBookmarkDataWithOptions( url, NSURLBookmarkCreationMinimalBookmark, NULL, NULL, NULL )// create bookmarkUserDefaultsSetObject( @"MyFileBookmark", bm )// save bookmark to user defaultsNSLog(@"\rbookmark saved")elseNSLog(@"\rfile not found" )url = NULLend ifend ifNSLog(@"\rURL: %@",url)end fn//UserDefaultsRemoveObject( @"MyFileBookmark" )fn DoItHandleEvents