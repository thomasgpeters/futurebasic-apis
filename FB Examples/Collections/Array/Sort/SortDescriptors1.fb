/*   SortDescriptor Demo   Bernie Wylde 20180421*/include "NSLog.incl"void local fn PrintArrayOfDicts( array as CFArrayRef )CFDictionaryRef   dictCFIndex index = 0for dict in arrayNSLog(@"%ld:\t%@\t%@\t%@",index,fn CFDictionaryGetValue( dict, @"key1" ),fn CFDictionaryGetValue( dict, @"key2" ),fn CFDictionaryGetValue( dict, @"key3" ))index++nextend fnvoid local fn DoItSortDescriptorRef   sd1, sd2, sd3CFStringRef         string1, string2CFIndex             indexNSLog(@"- unsorted -")CFMutableArrayRef mutArray = fn MutableArrayWithCapacity( 0 )for index = 1 to 20select ( rnd(5) )case 1 : string1 = @"a"case 2 : string1 = @"b"case 3 : string1 = @"c"case 4 : string1 = @"d"case else : string1 = @"e"end selectselect ( rnd(5) )case 1 : string2 = @"a"case 2 : string2 = @"b"case 3 : string2 = @"c"case 4 : string2 = @"e"case else : string2 = @"e"end selectlong value = rnd(9)CFNumberRef number = @(value)CFDictionaryRef dict = @{@"key1":string1,@"key2":string2,@"key3":number}MutableArrayAddObject( mutArray, dict )next indexfn PrintArrayOfDicts( mutArray )NSLog(@"\r- sorted -")sd1 = fn SortDescriptorWithKey( @"key1", YES )// ascendingsd2 = fn SortDescriptorWithKey( @"key2", YES )// ascendingsd3 = fn SortDescriptorWithKey( @"key3", NO )// descendingCFArrayRef descriptors = @[sd1, sd2, sd3]CFArrayRef sortedArray = fn ArraySortedArrayUsingDescriptors( mutArray, descriptors )fn PrintArrayOfDicts( sortedArray )end fnfn DoItHandleEvents