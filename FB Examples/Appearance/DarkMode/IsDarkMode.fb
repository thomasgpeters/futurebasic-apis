/*  IsDarkMode  Bernie Wylde 20181122  macOS 10.14+*/local fn IsDarkMode as BOOLAppearanceRef ref = fn ViewEffectiveAppearance(0)// specifying a tag value of zero will use an off-screen, autoreleased viewCFStringRef name = fn AppearanceBestMatchFromAppearancesWithNames( ref, @[NSAppearanceNameAqua,NSAppearanceNameDarkAqua] )end fn = fn StringIsEqual( name, NSAppearanceNameDarkAqua )void local fn SetLabelStringif ( fn IsDarkMode )textlabel 1, @"We're in the dark!"elsetextlabel 1, @"We're in light mode"end  ifend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _viewDidChangeEffectiveAppearanceselect ( tag )case _windowContentViewTagfn SetLabelStringend selectend selectend fnwindow 1, @"Dark Mode", (0,0,480,360)WindowSubclassContentView(1)textlabel 1,, (18,171,444,17)ControlSetAlignment( 1, NSTextAlignmentCenter )fn SetLabelStringon dialog fn DoDialogHandleEvents