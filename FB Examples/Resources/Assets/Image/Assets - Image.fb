include resources "Assets.xcassets"#plist NSAppleEventsUsageDescription @"Allow AppleEvents."void local fn ToggleDarkModeCFStringRef source = @"tell application \"System Events\"\ntell appearance preferences\nset dark mode to not dark mode\nend tell\nend tell\n"AppleScriptRef script = fn AppleScriptWithSource( source )fn AppleScriptExecute( script, NULL )end fnvoid local fn BuildWindowwindow 1, @"Assets - Image", (0,0,480,270)WindowSetContentMinSize( 1, fn CGSizeMake(100,100) )button 1,,, @"", (215,110,50,50),, NSBezelStyleTexturedSquareButtonSetBordered( 1, NO )ButtonSetImage( 1, fn ImageNamed( @"SunMoon" ) )ViewSetAutoresizingMask( 1, NSViewMinXMargin + NSViewMaxXMargin + NSViewMinYMargin + NSViewMaxYMargin )print @"click the icon to change appearance and image"end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case 1 : fn ToggleDarkModeend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents