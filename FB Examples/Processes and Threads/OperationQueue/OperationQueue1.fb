/*  OperationQueue1  Bernie Wylde 20180306*/include "NSLog.incl"void local fn FinishedReadingDataNSLog(@"Finished reading data")WindowClose(1)end fnvoid local fn ReadDataFromDisklong ifor i = 0 to 50delay 100next iOperationQueueAddOperationWithCallback( fn OperationQueueMain, @fn FinishedReadingData, NULL )end fnvoid local fn BuildBusyWindowwindow 1, @"Busy", (0,0,280,91)textlabel 1, @"Reading data\r\rThis may take some time...", (18,20,244,51)ControlSetAlignment( 1, NSTextAlignmentCenter )OperationQueueRef queue = fn OperationQueueInitOperationQueueAddOperationWithCallback( queue, @fn ReadDataFromDisk, NULL )end fnvoid local fn DoAppEvent( ev as long )select ( ev )case _appWillFinishLaunching : fn BuildBusyWindowend selectend fnon AppEvent fn DoAppEventHandleEvents