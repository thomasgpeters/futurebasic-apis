/*  Simple Background Thread 2  Bernie Wylde 20180306*/include "NSLog.incl"_doSomethingPanel = 1_label = 1_mainWindow = 2_btn = 1void local fn FinishedDoingSomethingWindowClose(_doSomethingPanel)NSLog(@"Finished doing something")end fnvoid local fn DoSomething( obj as CFTypeRef )long ifor i = 0 to 100delay 20ObjectPerformSelectorOnMainThread( obj, @"setStringValue:", fn StringWithFormat(@"%ld",i), YES )next iObjectCallFunctionOnMainThread( @fn FinishedDoingSomething, NULL, YES )end fnvoid local fn BuildDoSomethingPanelpanel _doSomethingPanel, @"Doing something in background", (0,0,280,57)textlabel _label, @"0", (127,20,27,17)ObjectCallFunctionInBackground( @fn DoSomething, fn TextLabelWithTag(_label) )end fnvoid local fn BuildMainWindowwindow _mainWindow, @"Main Window", (0,0,550,400)button _btnend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClick : NSLog(@"Button click")end selectend fnfn BuildDoSomethingPanelfn BuildMainWindowon dialog fn DoDialogHandleEvents