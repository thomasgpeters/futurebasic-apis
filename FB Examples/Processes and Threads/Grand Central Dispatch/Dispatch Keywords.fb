/*  Dispatch Keywords*/_window = 1begin enum 1_progBar_label_startBtnend enumvoid local fn StartActionbutton _startBtn, NOProgressIndicatorSetDoubleValue( _progBar, 0.0 )textlabel _label, @"0"dispatchgloballong ifor i = 0 to 99dispatchmain// UI changes must be done on main queuewindow output _window// ensure widget calls go to the correct windowProgressIndicatorIncrementBy( _progBar, 1.0 )ControlTakeDoubleValueFrom( _label, _progBar )dispatchenddelay 40// do somethingnext idispatchmainbutton _startBtn, YESdispatchenddispatchendend fnvoid local fn BuildWindowwindow _window, @"Dispatch Keywords", (0,0,480,140), NSWindowStyleMaskTitledprogressbar _progBar,, (20,101,440,20)ProgressIndicatorSetUsesThreadedAnimation( _progBar, NO )// fix cosmetic on Big Sur and abovetextlabel _label, @"0", (227,77,30,17)button _startBtn,,, @"Start", (396,13,70,32)end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _startBtn : fn StartActionend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents