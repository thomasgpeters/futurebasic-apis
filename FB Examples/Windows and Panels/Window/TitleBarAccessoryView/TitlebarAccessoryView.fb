/*   TitlebarAccessoryView   Bernie Wylde 20171117   macOS 10.10+*/include "NSLog.incl"_window = 1begin enum 1_label_accessoryView = 100_accessoryBtnend enumvoid local fn BuildWindowwindow _window, @"Titlebar Button", (0,0,480,360)WindowSetContentMinSize( _window, fn CGSizeMake(85,0) )// build off-screen accessory view and buttonViewRef aView = fn ViewInit( _accessoryView, fn CGRectmake(0,0,20,22) )ButtonRef btn = fn ButtonInit( _accessoryBtn, fn CGRectMake(0,4,14,14) )ButtonSetTitle( btn, @"" )ButtonSetBordered( btn, NO )ButtonSetImageNamed( btn, @"NSSmartBadgeTemplate" )ViewAddSubview( aView, btn )WindowAddTitlebarAccessoryView( _window, aView, NSLayoutAttributeRight )textlabel _label, @"accessory view \u279A", (350,343,112,17)ViewSetAutoresizingMask( _label, NSViewMinXMargin + NSViewMinYMargin )end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _accessoryBtnNSLog(@"Titlebar button clicked %ld",tag)end selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents