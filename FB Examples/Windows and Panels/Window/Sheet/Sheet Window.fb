_mainWindow = 1begin enum 1_mainBox_mainLabel_mainShowSheetBtnend enum_sheetWindow = 2begin enum 1_sheetLabel_sheetFld_sheetCancelBtn_sheetOKBtnend enumvoid local fn BuildWindowswindow _mainWindow, @"Main Window", (0,0,480,270)WindowSetContentMinSize( _mainWindow, fn CGSizeMake(480,270) )box _mainBox, @"Text entered in the sheet window will be displayed here:", (17,57,446,193)ViewSetAutoresizingMask( _mainBox, NSViewWidthSizable + NSViewHeightSizable )textlabel _mainLabel,, (18,20,406,136)ViewSetAutoresizingMask( _mainLabel, NSViewWidthSizable + NSViewHeightSizable )ViewAddSubview( _mainBox, _mainLabel )button _mainShowSheetBtn,,, @"Show Sheet Window", (302,13,164,32)ViewSetAutoresizingMask( _mainShowSheetBtn, NSViewMinXMargin + NSViewMaxYMargin )window -_sheetWindow,, (0,0,400,116)WindowSetContentMinSize( _sheetWindow, fn CGSizeMake(400,116) )WindowSetContentMaxSize( _sheetWindow, fn CGSizeMake(1000,116) )textlabel _sheetLabel, @"Enter text:", (18,79,67,17)textfield _sheetFld,,, (20,49,360,22)ViewSetAutoresizingMask( _sheetFld, NSViewWidthSizable + NSViewMinYMargin )button _sheetCancelBtn,,, @"Cancel", (222,13,82,32)ButtonSetKeyEquivalent( _sheetCancelBtn, @"\e" )ViewSetAutoresizingMask( _sheetCancelBtn, NSViewMinXMargin + NSViewMaxYMargin )button _sheetOKBtn,,, @"OK", (304,13,82,32)ButtonSetKeyEquivalent( _sheetOKBtn, @"\r" )ViewSetAutoresizingMask( _sheetOKBtn, NSViewMinXMargin + NSViewMaxYMargin )end fnvoid local fn DoDialog( ev as long, id as long, wnd as long )CFStringRef stringselect ( ev )case _btnClickselect ( wnd )case _mainWindowWindowBeginSheet( _mainWindow, _sheetWindow )WindowMakeFirstResponder( _sheetWindow, _sheetFld )case _sheetWindowselect ( id )case _sheetOKBtnstring = fn ControlStringValue( _sheetFld )WindowEndSheet( _mainWindow, _sheetWindow )textlabel _mainLabel, stringcase _sheetCancelBtnWindowEndSheet( _mainWindow, _sheetWindow )end selectend selectend selectend fneditmenu 1fn BuildWindowson dialog fn DoDialogHandleEvents