_window = 1begin enum 1_showPopoverBtnend enum_popover = 2begin enum 1_beepBtn_labelend enum_popoverWindow = 3void local fn BuildWindowwindow _window, @"Popover Demo", (0,0,400,300)button _showPopoverBtn,,, @"Show Popover", (137,132,127,32)popover _popover, (0,0,150,100), NSPopoverBehaviorTransienttextlabel _label, @"Popover", (48,63,54,17)button _beepBtn,,, @"Beep", (39,13,72,32)// create an invisible, detachable window for the popoverwindow -_popoverWindow, @"Popover Window", (0,0,300,200)button _beepBtn,,, @"Beep", (39,13,72,32)// tell the popover which window to usePopoverSetDetachableWindow( _popover, _popoverWindow )end fnvoid local fn DoDialog( ev as long, id as long, wnd as long )select ( ev )case _btnClickselect ( wnd )case _windowselect ( id )case _showPopoverBtnif ( fn PopoverIsShown( _popover ) )PopoverClose( _popover )elsePopoverShow( _popover, CGRectZero, 1, CGRectMinXEdge )end ifend selectcase _popoverselect ( id )case _beepBtnbeepend selectcase _popoverWindowselect ( id )case _beepBtnbeepend selectend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents