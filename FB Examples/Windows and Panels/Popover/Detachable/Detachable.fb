void local fn BuildWindowwindow 1, @"Popover", (0,0,400,300)button 1,,, @"Popover", (137,132,127,32)popover 2, (0,0,300,150), NSPopoverBehaviorTransienttextlabel 1, @"Click and drag to detach", (18,93,264,17)ControlSetAlignment( 1, NSTextAlignmentCenter )textlabel 2, @"macOS 10.10+", (18,20,264,17)ControlSetAlignment( 2, NSTextAlignmentCenter )end fnvoid local fn DoDialog( ev as long, id as long, wnd as long )select ( ev )case _btnClickselect ( wnd )case 1select ( id )case 1if ( fn PopoverIsShown( 2 ) )PopoverClose( 2 )elsePopoverShow( 2, CGRectZero, 1, CGRectMinXEdge )end ifend selectend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents