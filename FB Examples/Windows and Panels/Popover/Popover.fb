_window = 1begin enum 1_showPopoverBtnend enum_popover = 2begin enum 1_label_beepBtnend enumvoid local fn BuildWindowwindow _window, @"Popover", (0,0,400,300)button _showPopoverBtn,,, @"Show Popover", (137,132,127,32)// params: tag, rect, behavior, animatespopover _popover, (0,0,150,100), NSPopoverBehaviorTransienttextlabel _label, @"Popover", (48,63,54,17)button _beepBtn,,, @"Beep", (39,13,72,32)end fnvoid local fn DoDialog( ev as long, id as long, wnd as long )select ( ev )case _btnClickselect ( wnd )case _windowselect ( id )case _showPopoverBtnif ( fn PopoverIsShown( _popover ) )PopoverClose( _popover )elsePopoverShow( _popover, CGRectZero, 1, CGRectMinXEdge )end ifend selectcase _popoverselect ( id )case _beepBtnbeepend selectend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents