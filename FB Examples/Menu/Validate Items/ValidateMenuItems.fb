include "NSLog.incl"_mApplication = 0begin enum 1_iSeparator_iPreferencesend enum_mFile = 1begin enum_iNew_iOpen_// separator_iCloseend enum_mEdit = 2_mWindow = 3void local fn BuildMenu// applicationmenu _mApplication, _iSeparatormenu _mApplication, _iPreferences,, @"Preferences…", @","// filemenu _mFile,,, @"File"menu _mFile, _iNew,, @"New…", @"n"menu _mFile, _iOpen,, @"Open…", @"o"menu _mFile, _iClose,, @"Close", @"w"MenuItemSetAction( _mFile, _iClose, @"performClose:" )MenuSetAutoenablesItems( _mFile, YES )// editeditmenu _mEdit// windowwindowmenu _mWindowend fnvoid local fn BuildWindowwindow 1,, (0,0,550,400)end fnlocal fn ValidateMenuItems( menuID as long, itemID as long )BOOL flag = NOselect ( menuID )case _mApplicationselect ( itemID )case _iPreferences//flag = YESend selectcase _mFileselect ( itemID )case _iNewflag = YEScase _iOpen//flag = YESend selectend selectend fn = flagvoid local fn DoMenu( menuID as long, itemID as long )select ( menuID )case _mApplicationcase _mFileend selectend fnfn BuildMenufn BuildWindowMenuSetValidateItemsCallback( @fn ValidateMenuItems )on menu fn DoMenuHandleEvents