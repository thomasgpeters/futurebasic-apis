include "NSLog.incl"_mOptions = 1begin enum_iAnOption_iAnotherOption__iColorend enum_mColor = 101begin enum_iRed_iOrange_iYellowend enumvoid local fn BuildMenumenu _mOptions,,, @"Options"menu _mOptions, _iAnOption,, @"An Option"menu _mOptions, _iAnotherOption,, @"Another Option"menu _mOptions, _iColor,, @"Color"menu _mColormenu _mColor, _iRed,, @"Red", @"r"menu _mColor, _iOrange,, @"Orange", @"o"menu _mColor, _iYellow,, @"Yellow", @"y"MenuSetSubmenu( _mOptions, _iColor, _mColor )end fnvoid local fn BuildWindowwindow 1, @"Submenu (aka hierarchical menu)", (0,0,480,270)button 1,,, @"Color Menu", (174,117,133,32)end fnvoid local fn DoMenu( menuID as long, itemID as long )NSLog(@"MenuID: %ld, ItemID: %ld",menuID,itemID)if ( menuID == _mColor )ButtonSetTitle( 1, fn MenuItemTitle( menuID, itemID ) )end ifend fnvoid local fn DoDialog( ev as long )if ( ev == _btnClick )fn MenuPopUp( _mColor, 0, fn CGPointMake(110,5), 1 )end ifend fnfn BuildMenufn BuildWindowon menu fn DoMenuon dialog fn DoDialogHandleEvents