include "Tlbx Symbols.incl"_window = 1begin enum 1_imageView_countDownBtnend enumvoid local fn BuildWindowwindow _window, @"Symbol Effect", (0,0,400,400), NSWindowStyleMaskTitledimageview _imageView,,, (100,100,200,200), NSImageScaleProportionallyUpOrDown,, NSImageFrameGrayBezelColorRef color1 = fn ColorWithRGB( 1.00, 0.15, 0.00, 1.0 )ColorRef color2 = fn ColorWithRGB( 0.00, 0.98, 0.00, 1.0 )ColorRef color3 = fn ColorWithRGB( 0.02, 0.20, 1.00, 1.0 )CFArrayRef colors = @[color1,color2,color3]ImageSymbolConfigurationRef config = fn ImageSymbolConfigurationWithPaletteColors( colors )ImageViewSetSymbolConfiguration( _imageView, config )button _countDownBtn,,, @"Count Down", (146,13,109,32)end fnvoid local fn CountDownActionstatic long count = 5block TimerRef t = timerbegin 0, 1, YESSymbolReplaceContentTransitionRef effect = fn SymbolReplaceContentTransitionDownUpImageViewAddSymbolEffect( _imageView, (SymbolEffectRef)effect )ImageRef image = fn ImageWithSystemSymbolName( fn StringWithFormat(@"%ld.square",count), NULL )if ( image ) then imageview _imageView,, imagecount--if ( count < 0 )TimerInvalidate(t)count = 5end iftimerendend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _countDownBtn : fn CountDownActionend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents