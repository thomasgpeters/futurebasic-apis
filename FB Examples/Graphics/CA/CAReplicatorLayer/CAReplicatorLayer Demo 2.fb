/*  CAReplicatorLayer Demo 2  Copy of Apple demo*/void local fn AddLayersToView( tag as NSInteger )CALayerRef             layer, redSquareCAReplicatorLayerRef   replicatorLayer, outerReplicatorLayerlong                   instanceCountfloat                  offsetStepViewSetWantsLayer( 1, YES )layer = fn ViewLayer( 1 )redSquare = fn CALayerInitCALayerSetBackgroundColor( redSquare, fn ColorWhite )CALayerSetFrame( redSquare, fn CGRectMake(0,0,100,100) )replicatorLayer = fn CAReplicatorLayerInitinstanceCount = 5CAReplicatorLayerSetInstanceCount( replicatorLayer, instanceCount )CAReplicatorLayerSetInstanceTransform( replicatorLayer, fn CATransform3DMakeTranslation(110,0,0) )offsetStep = -1/instanceCountCAReplicatorLayerSetInstanceBlueOffset( replicatorLayer, offsetStep )CAReplicatorLayerSetInstanceGreenOffset( replicatorLayer, offsetStep )CALayerAddSublayer( replicatorLayer, redSquare )outerReplicatorLayer = fn CAReplicatorLayerInitCALayerAddSublayer( outerReplicatorLayer, replicatorLayer )CAReplicatorLayerSetInstanceCount( outerReplicatorLayer, instanceCount )CAReplicatorLayerSetInstanceTransform( outerReplicatorLayer, fn CATransform3DMakeTranslation(0,110,0) )CAReplicatorLayerSetInstanceRedOffset( outerReplicatorLayer, offsetStep )CALayerAddSublayer( layer, outerReplicatorLayer )end fnvoid local fn BuildWindowwindow 1, @"CAReplicatorLayer Demo", (0,0,640,650)view 1, (50,50,540,550)fn AddLayersToView( 1 )end fnfn BuildWindowHandleEvents