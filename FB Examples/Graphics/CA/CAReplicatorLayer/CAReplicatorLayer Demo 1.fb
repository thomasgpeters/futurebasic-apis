/*  CAReplicatorLayer Demo 1  Copy of Apple demo*/void local fn AddLayersToView( tag as NSInteger )CALayerRef   layer, redSquarelong         instanceCountfloat        offsetStepViewSetWantsLayer( 1, YES )layer = fn ViewLayer( 1 )CAReplicatorLayerRef replicatorLayer = fn CAReplicatorLayerInitCALayerAddSublayer( layer, replicatorLayer )redSquare = fn CALayerInitCALayerSetBackgroundColor( redSquare, fn ColorWhite )CALayerSetFrame( redSquare, fn CGRectMake(0,0,100,100) )instanceCount = 5CAReplicatorLayerSetInstanceCount( replicatorLayer, instanceCount )CAReplicatorLayerSetInstanceTransform( replicatorLayer, fn CATransform3DMakeTranslation(110, 0, 0) )offsetStep = -1/instanceCountCAReplicatorLayerSetInstanceBlueOffset( replicatorLayer, offsetStep )CAReplicatorLayerSetInstanceGreenOffset( replicatorLayer, offsetStep )CALayerAddSublayer( replicatorLayer, redSquare )end fnvoid local fn BuildWindowwindow 1, @"CAReplicatorLayer Demo", (0,0,640,200)view 1, (50,50,540,300)fn AddLayersToView( 1 )end fnfn BuildWindowHandleEvents