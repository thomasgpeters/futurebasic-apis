/*   CAKeyframeAnimation   Bernie Wylde 20170909   Modifications:   Ken Shmidheiser 20180828*/include resources "iMac.png"include resources "fb_logo.png"_window = 1begin enum output 1_foregroundImageView_anotherImageView_animateBtnend enumvoid local fn AnimateView( tag as NSInteger, moveToPoint as CGPoint, lineToPoint as CGPoint )BezierPathRef path = fn BezierPathInitBezierPathMoveToPoint( path, moveToPoint )BezierPathLineToPoint( path, lineToPoint )CAKeyframeAnimationRef animation = fn CAKeyframeAnimationWithKeyPath( @"position" )CAKeyframeAnimationSetPath( animation, path )CAMediaTimingSetDuration( animation, 1.0 )CAMediaTimingSetFillMode( animation, kCAFillModeForwards )CAAnimationSetRemovedOnCompletion( animation, NO )CALayerAddAnimation( fn ViewLayer(tag), animation, @"position" )end fnvoid local fn BuildWindowwindow _window, @"CAKeyframeAnimation", (0,0,480,360), NSWindowStyleMaskTitled + NSWindowStyleMaskClosableViewSetWantsLayer( WindowContentViewTag, YES )imageView _foregroundImageView,, @"iMac.png", (260,65,174,174)ViewSetWantsLayer( _foregroundImageView, YES )imageView _anotherImageView,, @"fb_logo.png", (25,130,80,80)ViewSetWantsLayer( _anotherImageView, YES )button _animateBtn,,, @"Animate", (14,13,100,32)end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _animateBtnfn AnimateView( _foregroundImageView, fn CGPointMake( 260, 65 ), fn CGPointMake( 145, 65 ) )fn AnimateView( _anotherImageView, fn CGPointMake( 25, 130 ), fn CGPointMake( 195, 130 ) )end selectcase _windowWillClose : endend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents