/*  Demonstrates ViewSetNeedsDisplay in CGGraphics  Written by S.Van Voorst   {20171007}  CG -> BezierPath bw 20180308*/_window = 100_wndW = 600_wndH = 600begin enum 1_sliderBtn_sliderValue_cWell_dotView_quitBtnend enumvoid local fn ViewDrawRectCGRect viewRect, r, dotRectviewRect = fn ViewBounds(_dotView)// ---- Background & Frame ------ //r = fn CGRectInset( viewRect, 2, 2 )BezierPathStrokeFillRect( r, 4.0, NULL, fn ColorWhite )// -------- Dot Size ------- //long sliderValue = fn ControlIntegerValue( _sliderBtn )dotRect.origin.x = viewRect.size.width/2 - sliderValuedotRect.origin.y = viewRect.size.height/2 - sliderValuedotRect.size.width = 2 *  sliderValuedotRect.size.height = 2 *  sliderValue// -------- Dot Color ------- //BezierPathFillOvalInRect( dotRect, fn ColorWellColor(_cWell) )end fnvoid local fn BuildWindowwindow 1, @"DotView", (0,0,_wndW,_wndH)subclass view _dotView, (0,0,_wndH,_wndW)// **** Color Well **** //colorwell _cWell,, fn ColorRed, (30,30,50,30)ViewAddSubview( _dotView, _cWell )// **** Slider **** //slider _sliderBtn,, 75, (170,30,250,20), 0, 240ControlSetContinuous( _sliderBtn, YES )ViewAddSubview( _dotView, _sliderBtn )textlabel _sliderValue, @"75", (430,35,36,17)ControlSetAlignment( _sliderValue, NSTextAlignmentCenter )ViewAddSubview( _dotView, _sliderValue )// **** Quit Btn **** //button _quitBtn,,, @"Q", (_wndW-50,10,40,40),, NSBezelStyleCircularControlSetAction( _quitBtn, @"terminate:" )end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect (tag)case _cWellViewSetNeedsDisplay(_dotView)case _sliderBtnControlTakeIntegerValueFrom( _sliderValue, _sliderBtn )ViewSetNeedsDisplay(_dotView)end selectcase _viewDrawRectselect ( tag )case _dotViewfn ViewDrawRectend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents