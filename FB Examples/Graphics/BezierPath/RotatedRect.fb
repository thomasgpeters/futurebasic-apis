/*  Demonstrates a rectangle that rotates about its origin.  Written by S.Van Voorst   {20180303}*/_window = 1_wndW = 650_wndH = 600begin enum 1_view_quitBtnend enumvoid local fn ViewDrawRect( tag as long )AffineTransformRef   txCGFloat              degBezierPathRef        newPathBezierPathStrokeFillRect( fn ViewBounds( tag ), 4.0, fn ColorBlack, fn ColorWhite )CGRect r = ( 240, 240, 140, 100 )BezierPathRef path = fn BezierPathWithRect( r )for deg = 0 to 360 step 60tx = fn AffineTransformInitAffineTransformTranslate( tx, 60, 0 )AffineTransformTranslate( tx, 240, 240 )AffineTransformRotateByDegrees( tx, deg )AffineTransformTranslate( tx, -240, -240 )newPath = fn AffineTransformBezierPath(tx, path)BezierPathSetLineWidth( newPath, 3.0 )ColorSet(fn ColorBlack())BezierPathStroke(newPath)nextend fnvoid local fn BuildWindowlong   wndStyleMaskwndStyleMask = NSWindowStyleMaskTitledwndStyleMask += NSWindowStyleMaskClosablewndStyleMask += NSWindowStyleMaskMiniaturizablewndStyleMask += NSWindowStyleMaskResizablewindow _window, @"Test window", ( 0, 0, _wndW, _wndH ), wndStyleMasksubclass view _view, ( 0, 60, _wndW, _wndH-60 )ViewSetAutoresizingMask( _view, NSViewWidthSizable + NSViewHeightSizable )button _quitBtn, , , @"Q", ( _wndW - 50, 10, 40, 40 ),, NSBezelStyleCircularViewSetAutoresizingMask( _quitBtn, NSViewMinXMargin + NSViewMaxYMargin )ControlSetAction( _quitBtn, @"terminate:" )end fnvoid local fn DoDialog ( ev as long )select ( ev )case _viewDrawRectfn ViewDrawRect(_view)end selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents