/*  Animated GIF in ImageView  Demonstrates displaying animated GIF in ImageView.  Code automatically adjusts window and views to fit GIF image file.  Ken Shmidheiser  16 November 2021  macOS 10.12+*/output file "Animated GIF"include resources "sandwich.gif"// include resources "geometric.gif"// Set image as App property using image name.AppPropertySet( @"gifImage", fn ImageNamed( @"sandwich.gif"  ) )_window = 1begin enum output 1_gifView_quitBtnend enumvoid local fn BuildWindowlong     wndStyleMaskCGRect   rImageRef imageCGSize   sizeimage = fn AppProperty( @"gifImage" )size  = fn ImageSize( image )r = fn CGRectMake( 0, 0, size.width, size.height + 50 )wndStyleMask  = NSWindowStyleMaskTitledwndStyleMask += NSWindowStyleMaskClosablewndStyleMask += NSWindowStyleMaskMiniaturizablewindow _window, fn ImageName( image ), r, wndStyleMaskr = fn CGRectMake( 0, 50, size.width, size.height )imageview _gifView, YES, image, r, NSImageScaleNone, NSImageAlignCenter, NSImageFramePhoto, _windowImageViewSetAnimates( _gifView, YES )r = fn CGRectMake( size.width - 105, 15, 90, 24 )button _quitBtn,,, @"Quit", r, NSButtonTypeMomentaryLight, NSBezelStyleSmallSquare, _windowButtonSetBordered( _quitBtn, NO )ButtonSetBackgroundColor( _quitBtn, fn ColorDarkGray )ButtonSetTitleColor( _quitBtn, fn ColorWhite )end fnvoid local fn DoDialog( ev as long, tag as long )select (ev)case _btnClickselect (tag)case _quitBtn : endend selectcase _windowShouldClose : endend selectend fnon dialog fn DoDialogfn BuildWindowHandleEvents