/*  Email Verifier  Ken Shmidheiser  https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html*/include "NSLog.incl"local fn ValidateEmail( emailStr as CFStringRef ) as BOOLCFStringRef   regexPredicateRef  predBOOL          result : result = NOregex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,64}"pred = fn PredicateWithFormat( @"SELF MATCHES %@", regex )result = fn PredicateEvaluateWithObject( pred, emailStr )end fn = resultCFMutableArrayRef emailMutArrCFStringRef       testStringBOOL              resultemailMutArr = fn MutableArrayWithCapacity( 0 )MutableArrayAddObject( emailMutArr, @"support@apple.com" )MutableArrayAddObject( emailMutArr, @"certainly bogus" )MutableArrayAddObject( emailMutArr, @"JaneSmithChicago@esp.com" )MutableArrayAddObject( emailMutArr, @"johndoe@gmail.com" )MutableArrayAddObject( emailMutArr, @"closebutnotquite@gmail" )MutableArrayAddObject( emailMutArr, @"anothertoughone.com" )MutableArrayAddObject( emailMutArr, @"hello@yourdomain.com" )MutableArrayAddObject( emailMutArr, @"willthispass@.com" )MutableArrayAddObject( emailMutArr, @"A random string." )for testString in emailMutArrresult = fn ValidateEmail( testString )if (result )NSLog( @"Valid email address:  \t%@", testString )elseNSLog( @"Not an email address: \t%@ ", testString )end ifnextHandleEvents