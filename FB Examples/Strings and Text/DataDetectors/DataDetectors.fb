/*  Demo of passing a DataDetector as a RegularExpression  28 May 2021 Ken Shmidheiser  https:  Supported data detectors checkingTypes are:    NSTextCheckingTypeDate    NSTextCheckingTypeAddress    NSTextCheckingTypeLink    NSTextCheckingTypePhoneNumber    NSTextCheckingTypeTransitInformation*/include "NSLog.incl"CFStringRef           stringNSUInteger            lengthCFRange               rangeDataDetectorRef       detectorsErrorRef              errCFArrayRef            matchesTextCheckingResultRef matchstring = @"My flights, American AA10, and United UA5732, are scheduled tomorrow night from 9 PM PST to 5 AM EST. Reservation can be checked at wwww.airlinecheck.com. I will be staying at The Plaza Hotel, 768 5th Ave, New York, NY 10019. You can reach me at 555-555-1234 or me@example.com"NSLogSetTextColor(fn ColorSystemBlue)NSLog(@"\"%@\"\n\n",string)NSLogSetTextColor(fn ColorText)length = len( string )range  = fn CFRangeMake( 0, length )detectors = fn DataDetectorWithTypes( NSTextCheckingAllTypes, @err )if err then NSLog( @"%@", fn ErrorLocalizedFailureReason( err ) ) : stop "Error creating data detector."matches = fn RegularExpressionMatches( (RegularExpressionRef)detectors, string, 0, range )for match in matchesNSTextCheckingType typetype = fn TextCheckingResultType( match )select ( type )case NSTextCheckingTypeLink               : NSLog( @"matched URL: %@",          fn TextCheckingResultURL(               match ) )case NSTextCheckingTypePhoneNumber        : 	NSLog( @"matched phone number: %@", fn TextCheckingResultPhoneNumber(       match ) )case NSTextCheckingTypeDate               : NSLog( @"matched date: %@",         fn TextCheckingResultDate(              match ) )case NSTextCheckingTypeAddress            : NSLog( @"matched address: %@",      fn TextCheckingResultAddressComponents( match ) )case NSTextCheckingTypeTransitInformationNSLog( @"matched transit information:%@", fn TextCheckingResultComponents( match ) )CFRange transitRangetransitRange = fn TextCheckingResultRange( match )NSLog( @"Range in string: location = %d\tlength = %d\n", transitRange.location, transitRange.length )end selectnextHandleEvents