/*  Hyperlink 3  Ken Shmidheiser & Bernie Wylde 20230415  This third option draws the link text into a custom view rather than setting it in a text label*/#define LINK_NUM @"linkNum"#define LINK_TITLE @[@"FutureBasic Home Page",@"Rosetta Code FutureBasic"]#define LINK_URL @[fn URLWithString(@"https://www.brilorsoftware.com/fb"),fn URLWithString(@"https://rosettacode.org/wiki/Category:FutureBasic")]_window = 1begin enum 1_hyperlinkView_changeLinkBtnend enumvoid local fn ViewDrawRect( tag as long )CFStringRef title = fn ArrayObjectAtIndex( LINK_TITLE, fn NumberIntegerValue(fn ViewProperty( tag, LINK_NUM )) )CFMutableAttributedStringRef aString = fn MutableAttributedStringWithString( title )MutableAttributedStringSetForegroundColor( aString, fn ColorSystemBlue     )MutableAttributedStringSetUnderline( aString, NSUnderlineStyleSingle )MutableAttributedStringSetAlignment( aString, NSTextAlignmentCenter  )MutableAttributedStringSetFont( aString, fn FontLabelFontOfSize( 13 ) )AttributedStringDrawInRect( aString, fn ViewBounds( tag ) )end fnvoid local fn BuildWindowCGRect r = fn CGRectMake( 0, 0, 400, 150 )window _window, @"View Hyperlink", r, NSWindowStyleMaskTitled + NSWindowStyleMaskClosable + NSWindowStyleMaskMiniaturizabler = fn CGRectMake( 119, 80, 162, 16 )subclass view _hyperlinkView, rViewPropertySetLong( _hyperlinkView, LINK_NUM, 0 )ViewSetClickGestureRecognizer( _hyperlinkView )r = fn CGRectMake( 260, 13, 120, 32 )button _changeLinkBtn,,, @"Change link", rend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _changeLinkBtnlong num = fn ViewPropertyLong( _hyperlinkView, LINK_NUM ) + 1if ( num > 1 ) then num = 0ViewPropertySet( _hyperlinkView, LINK_NUM, @(num) )ViewSetNeedsDisplay( _hyperlinkView )end selectcase _gestureRecognizerClickselect ( tag )case _hyperlinkViewCFURLRef url = fn ArrayObjectAtIndex( LINK_URL, fn NumberIntegerValue(fn ViewProperty( tag, LINK_NUM )) )fn WorkspaceOpenURL( url )end selectcase _viewResetCursorRectsselect ( tag )case _hyperlinkView : ViewAddCursorRect( tag, fn ViewBounds(tag), fn CursorPointingHand )end selectcase _viewDrawRectselect ( tag )case _hyperlinkView : fn ViewDrawRect( tag )end selectcase _windowWillClose : endend selectend fnon dialog fn DoDialogfn BuildWindowHandleEvents