/*  TextView Selection  Ken Shmidheiser 20180803*/output file "TextView Selection"_mApplication = 0begin enum_iAbout_iSeparator_iPreferencesend enum_mFile = 1_mEdit = 2_window = 1begin enum output 1_scrollView_textView_selectionLabelend enumvoid local fn BuildMenuMenuItemSetOnMenuAction( _mApplication, _iAbout )menu _mApplication, _iSeparatormenu _mApplication, _iPreferences,, @"Preferences…", @","menu _mFile, -1,, @"File"editmenu _mEditend fnvoid local fn BuildWindowlong   wndStyleMaskCGRect   rwndStyleMask  = NSWindowStyleMaskTitledwndStyleMask += NSWindowStyleMaskClosablewndStyleMask += NSWindowStyleMaskMiniaturizabler = fn CGRectMake( 0, 0, 600, 450 )window _window, @"TextView Selection", r, wndStyleMaskr = fn CGRectMake( 20, 405, 560, 40 )textlabel _selectionLabel, @"Selected range will be shown here.", rr = fn CGRectMake( 20, 45, 560, 375 )scrollview _scrollView, r, NSLineBordertextview _textView, r, _scrollViewTextViewSetUsesRuler( _textView, YES )TextViewSetRulerVisible( _textView, YES )TextViewSetUsesInspectorBar( _textView, YES )TextSetFontWithName( _textView, @"Menlo", 13.0 )TextSetString( _textView, @"Here is some text you can practice selecting, or you can add your own." )WindowMakeFirstResponder( _window, _textView )end fnvoid local fn DoDialog( ev as long, tag as long, wnd as long )CFRange     selectedRangeCFStringRef selectionInfoselect (ev)case _textViewDidChangeSelectionselectedRange = fn TextSelectedRange( _textView )selectionInfo = fn StringWithFormat( @"Selected range: %d to %d", selectedRange.location, selectedRange.length + selectedRange.location )ControlSetStringValue( _selectionLabel, selectionInfo )case _windowWillClose : endend selectend fnvoid local fn DoMenu( menuID as long, itemID as long )CFDictionaryRef       dictCFAttributedStringRef attrStrselect (menuID)case _mApplicationselect (itemID)case _iAboutattrStr = fn AttributedStringWithString( @"TextView Selection." )dict = @{¬@"Credits"            : attrStr,¬@"ApplicationName"    : @"TextView Selection",¬@"Version"            : @"1.0",¬@"Copyright"          : @"Copyright 2018 Ken Shmidheiser",¬@"ApplicationVersion" : @"1.0 alpha"¬}AppOrderFrontStandardAboutPanelWithOptions( dict )end selectcase _mFileselect (itemID )end selectend selectend fnon menu fn DoMenuon dialog fn DoDialogfn BuildMenufn BuildWindowHandleEvents