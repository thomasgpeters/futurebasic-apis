/*  RulerViewRegisterUnit*/_mEdit = 1_window = 1begin enum output 1_scrollView_textView_unitsLabel_inchRadio_cmRadio_thumbRadioend enumvoid local fn BuildWindowCGRect                     rMutableParagraphStyleRef   stylelong                       indexCFMutableArrayRef          tabStopsdouble                     tabLocationTextTabRef                 tr = fn CGRectMake( 0, 0, 600, 450 )window _window, @"RulerViewRegisterUnit", rWindowSetContentMinSize( _window, fn CGSizeMake(352,150) )r = fn CGRectMake( 20, 45, 560, 385 )scrollview _scrollView, r, NSBezelBorderViewSetAutoresizingMask( _scrollView, NSViewWidthSizable + NSViewHeightSizable )textview _textView,, _scrollViewTextViewSetUsesRuler( _textView, YES )TextViewSetRulerVisible( _textView, YES )TextViewSetUsesInspectorBar( _textView, YES )style = fn MutableParagraphStyleInittabStops = fn MutableArrayWithCapacity(0)tabLocation = 0.0for index = 0 to 9t = fn TextTabWithAlignment( NSTextAlignmentLeft, tabLocation, NULL )MutableArrayAddObject( tabStops, t )tabLocation += 99.21next indexMutableParagraphStyleSetTabStops( style, tabStops )TextViewSetDefaultParagraphStyle( _textView, style )TextSetString( _textView, @"Registers a new unit of measurement with the NSRulerView class, making it available to all instances of NSRulerView." )textlabel _unitsLabel, @"Ruler units:", (18,20,73,17)ViewSetAutoresizingMask( _unitsLabel, NSViewMaxYMargin )button _inchRadio,, NSControlStateValueOn, @"Inches", (94,19,62,18), NSButtonTypeRadioViewSetAutoresizingMask( _inchRadio, NSViewMaxYMargin )button _cmRadio,,, @"Centimeters", (161,19,96,18), NSButtonTypeRadioViewSetAutoresizingMask( _cmRadio, NSViewMaxYMargin )button _thumbRadio,,, @"Thumbs", (262,19,72,18), NSButtonTypeRadioViewSetAutoresizingMask( _thumbRadio, NSViewMaxYMargin )WindowMakeFirstResponder( _window, _textView )end fnvoid local fn DoDialog( ev as long, tag as long, wnd as long )RulerViewRef   rulerselect (ev)case _btnClickruler = fn ScrollViewHorizontalRulerView( _scrollView )select ( tag )case _inchRadio : RulerViewSetMeasurementUnits( ruler, @"Inches" )case _cmRadio : RulerViewSetMeasurementUnits( ruler, @"Centimeters" )case _thumbRadio : RulerViewSetMeasurementUnits( ruler, @"Thumbs" )end selectcase _windowWillClose : endend selectend fnon dialog fn DoDialogRulerViewRegisterUnit( @"Thumbs", @"tb", 99.21, @[@10.0], @[@0.5] )editmenu _mEditfn BuildWindowHandleEvents