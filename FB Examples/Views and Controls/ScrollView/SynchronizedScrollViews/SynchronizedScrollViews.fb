include "NSLog.incl"_window = 1begin enum output 1_scrollView1_textView1_scrollView2_textView2end enumvoid local fn ScrolledNotification( note as NotificationRef )ClipViewRef c1, c2CGRect      r1, r2CGPoint     pt1, pt2c1 = fn ScrollViewContentView( _scrollView1 )c2 = fn ScrollViewContentView( _scrollView2 )r1 = fn ClipViewBounds( c1 )r2 = fn ClipViewBounds( c2 )pt1 = r1.originpt2 = r2.originif ( fn ObjectIsEqual( fn NotificationObject( note ), c2 ) )pt1.y = pt2.yClipViewScrollToPoint( c1, pt1 )ScrollViewReflectScrolledClipView( _scrollView1 )elsept2.y = pt1.yClipViewScrollToPoint( c2, pt2 )ScrollViewReflectScrolledClipView( _scrollView2 )end ifend fnvoid local fn SynchronizeScrollViews( tag1 as long, tag2 as long )ClipViewRef   c1, c2c1 = fn ScrollViewContentView( tag1 )c2 = fn ScrollViewContentView( tag2 )ViewSetPostsBoundsChangedNotifications( c1, YES )ViewSetPostsBoundsChangedNotifications( c2, YES )NotificationCenterAddObserver( @fn ScrolledNotification, NSViewBoundsDidChangeNotification, c1 )NotificationCenterAddObserver( @fn ScrolledNotification, NSViewBoundsDidChangeNotification, c2 )end fnvoid local fn BuildWindowCFMutableStringRef   stringCFIndex              indexwindow _window, @"Synchronized ScrollViews", (0,0,528,240), NSWindowStyleMaskTitledstring = fn MutableStringWithCapacity(0)for index = 0 to 99MutableStringAppendFormat( string, @"Line %ld\n", index )nextscrollview _scrollView1, (20,20,240,200), NSBezelBordertextview _textView1,, _scrollView1TextSetString( _textView1, string )scrollview _scrollView2, (268,20,240,200), NSBezelBordertextview _textView2,, _scrollView2TextSetString( _textView2, string )fn SynchronizeScrollViews( _scrollView1, _scrollView2 )end fnfn BuildWindowHandleEvents