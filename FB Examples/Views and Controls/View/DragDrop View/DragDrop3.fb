include "NSLog.incl"// draw frame around view when drag insidevoid local fn ViewDrawRect( tag as NSInteger )CGContextRef ctxCGRect rif ( fn ViewDragInside( tag ) )ctx = fn GraphicsContextCurrentCGContextr = fn ViewBounds( tag )r = fn CGRectInset( r, 3, 3 )CGContextSetGrayStrokeColor( ctx, 0.8, 1.0 )CGContextSetLineWidth( ctx, 5.0 )CGContextStrokeRect( ctx, r )end ifend fnvoid local fn BuildWindowwindow 1,, (0,0,550,400)subclass view 1, (20,20,510,360)ViewSetAutoresizingMask( 1, NSViewWidthSizable + NSViewHeightSizable )ViewRegisterForDraggedFileTypes( 1, NULL )textlabel 2, @"Drop files here", (229,191,93,17)end fnvoid local fn DoDialog( ev as long, tag as long )CFArrayRef   urlsselect ( ev )case _viewDrawRect : fn ViewDrawRect( tag )case _viewDraggingEnteredViewSetNeedsDisplay( tag )// drag entered view so tell it to redrawcase _viewPerformDragOperationurls = fn DialogEventArrayNSLog(@"%@",urls)case _viewDraggingExitedViewSetNeedsDisplay( tag )// drag exited view so tell it to redrawend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents