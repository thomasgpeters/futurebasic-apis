/*PDFView3Thumbnails work best on macOS 10.10+*/include "Tlbx PDFKit.incl"_window = 1begin enum 1_pdfView_thumbViewend enum// toolbar items_toolbar = 10begin enum 11_segCtrl_textFld_printBtnend enumvoid local fn MyPageChangedNotification( note as NotificationRef )NSInteger indexif ( fn StringIsEqual( fn NotificationName(note), PDFViewPageChangedNotification ) )index = fn PDFViewCurrentPageIndex( _pdfView ) + 1ControlSetStringValue( _textFld, fn StringWithFormat( @"%ld", index ) )end ifend fnvoid local fn SegmentedControlAction( tag as NSInteger )NSInteger seg = fn SegmentedControlSelectedSegment( tag )select ( seg )case 1PDFViewGoToNextPage( _pdfView )case elsePDFViewGoToPreviousPage( _pdfView )end selectend fnvoid local fn TextFieldEndEditing( tag as NSInteger )NSInteger index = fn ControlIntegerValue( tag )PDFViewGoToPageAtIndex( _pdfView, index )end fnvoid local fn PrintPDFbeepend fnvoid local fn OpenPDFPDFDocumentRef docNotificationCenterAddObserver( @fn MyPageChangedNotification, PDFViewPageChangedNotification, NULL )CFURLRef url = openpanel 1,, @"pdf"if ( url )doc = fn PDFDocumentWithURL( url )PDFViewSetDocument( _pdfView, doc )PDFThumbnailViewSetThumbnailSize( _thumbView, fn CGSizeMake(150,196) )PDFThumbnailViewSetPDFView( _thumbView, _pdfView )window _windowend ifend fnvoid local fn BuildMenumenu 1,,, @"File"menu 1,0,, @"Open…", @"o"menu 1,2,, @"Close…", @"w"MenuItemSetAction( 1, 2, @"performClose:" )editmenu 2end fnvoid local fn BuildWindownibwindow _window, @"Window"ControlSetFormat( _textFld, @"0123456789", YES, 0, 0 )fn OpenPDFend fnvoid local fn DoMenu( menuID as long, itemID as long )select ( menuID )case 1select ( itemID )case 0fn OpenPDFend selectend selectend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _toolbarItemClickselect ( tag )case _segCtrl : fn SegmentedControlAction( tag )case _printBtn : fn PrintPDFend selectcase _controlTextDidEndEditingselect ( tag )case _textFld : fn TextFieldEndEditing( tag )end selectend selectend fnfn BuildMenufn BuildWindowon menu fn DoMenuon dialog fn DoDialogHandleEvents