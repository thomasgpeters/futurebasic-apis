/*  Thomas Peters May 2019*/// menu/item constants_mFile = 1begin enum_iCloseend enum_mHello = 2begin enum_iSayHelloend enum// window/control constants_window = 1begin enum 1_myViewend enum_myViewWidth  = 550_myViewHeight = 550_bearTextureSize = 8_firstFrame = 1void local fn SKViewMouseDown( tag as NSInteger, event as EventRef )SKSceneRef   sceneCGPoint      ptCGRect       rCGFloat      multiplierSKNodeRef    bearscene = fn SKViewScene( tag )pt = fn EventLocationInNode( event, scene )r = fn SKNodeFrame( scene )if ( pt.x < fn CGRectGetMidX( r ) )multiplier = 1.0elsemultiplier = -1.0end ifbear = fn SKNodeChildNodeWithName( scene, @"Bear" )SKNodeSetXScale( bear, abs(fn SKNodeXScale(bear)) * multiplier )end fnlocal modeSKTextureAtlasRef atlasCFMutableArrayRef walkFrameslong              iCFStringRef       aTextureFrameNameSKSpriteNodeRef   walkingBearlocal fn animateBear as SKSpriteNodeRef/* * * run the action * */// build the anamitionatlas = fn SKTextureAtlasNamed( @"BearImages" )walkFrames = fn MutableArrayWithCapacity(0)// append images into atlasfor i = 1 to _bearTextureSizeaTextureFrameName = fn StringWithFormat( @"%@%d", @"bear", i )fn MutableArrayAddObject( walkFrames, fn SKTextureAtlasTextureNamed( atlas, aTextureFrameName ) )next// create the sprite and make it movewalkingBear = fn SKSpriteNodeWithTexture( fn CFArrayGetValueAtIndex( walkFrames, _firstFrame ) )SKNodeSetName( walkingBear, @"Bear" )SKNodeRunAction( walkingBear, fn SKActionRepeatActionForever( fn SKActionAnimateWithTextures( walkFrames, 0.1 ) ) )end fn = walkingBearlocal modeSKSpriteNodeRef walkingBearlocal fn buildBear as SKSpriteNodeRef/* * * build bear * */walkingBear = fn animateBearSKNodeSetPosition( walkingBear, fn CGPointMake( _myViewWidth/2, _myViewHeight/2 ) )end fn = walkingBearlocal modeSKSceneRef      sceneSKSpriteNodeRef walkingBearvoid local fn buildBearScene/* * * build scene * */subclass skview _myView, ( 0, 0, _myViewWidth, _myViewHeight )scene = fn SKSceneWithSize( fn CGSizeMake( _myViewWidth, _myViewHeight ) )SKSceneSetScaleMode( scene, SKSceneScaleModeAspectFit )SKViewPresentScene( _myView, scene )walkingBear = fn buildBearSKNodeAddChild( scene, walkingBear )end fn