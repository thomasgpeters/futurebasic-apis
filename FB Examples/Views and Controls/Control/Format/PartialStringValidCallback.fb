local fn MyControlFormatterCallback( tag as NSInteger, partialStringPtr as ^CFStringRef, propSelRangePtr as ^CFRange, origString as CFStringRef, origSelRange as CFRange, errDescPtr as ^CFStringRef, userData as ptr ) as BOOLBOOL accept = YESNSUInteger length = fn StringLength(*partialStringPtr)if ( length )beepif ( length > 2 )accept = NOexit fnend if// pass numbers onlyCFCharacterSetRef set = fn CharacterSetWithCharactersInString( @"0123456789" )set = fn CharacterSetInvertedSet( set )CFStringRef string = fn ArrayComponentsJoinedByString( fn StringComponentsSeparatedByCharactersInSet( *partialStringPtr, set ), @"" )if ( fn StringIsEqual( string, *partialStringPtr ) == NO )*partialStringPtr = stringaccept = NOexit fnend iflong value = fn StringIntegerValue(string)if ( value > 48 )beep*partialStringPtr = @"48"accept = NOend ifend ifend fn = accepteditmenu 1window 1,, (0,0,480,62)WindowSetContentMinSize( 1, fn CGSizeMake(140,62) )textfield 1,,, (20,20,440,22)TextFieldSetPlaceholderString( 1, @"Numbers 0-48" )ViewSetAutoresizingMask( 1, NSViewMinYMargin + NSViewWidthSizable )ControlFormatterSetIsPartialStringValidCallback( 1, @fn MyControlFormatterCallback, NULL )WindowMakeFirstResponder( 1, 1 )HandleEvents