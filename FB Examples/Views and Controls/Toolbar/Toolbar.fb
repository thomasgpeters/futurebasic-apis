include "NSLog.incl"_window = 1begin enum 1_arrowBtn_pushBtnend enum_toolbar = 1begin enum 1_toolbarColorsItem_toolbarFontsItem_toolbarFlexSpaceItem_toolbarComputerItemend enumvoid local fn BuildWindowwindow _window, @"Toolbar Demo", (0,0,550,400)toolbar _toolbarToolbarSetAllowsUserCustomization( _toolbar, YES )ToolbarSetAutosavesConfiguration( _toolbar, YES )toolbaritem _toolbarColorsItem, NSToolbarShowColorsItemIdentifiertoolbaritem _toolbarFontsItem, NSToolbarShowFontsItemIdentifiertoolbaritem _toolbarFlexSpaceItem, NSToolbarFlexibleSpaceItemIdentifiertoolbaritem _toolbarComputerItem, @"Computer", @"Computer", fn ImageNamed( NSImageNameComputer )WindowSetToolbar( _window, _toolbar )button _arrowBtn,,, @"", (492,402,31.5,30),, NSBezelStyleSmallSquareButtonSetBordered( _arrowBtn, NO )ButtonSetImage( _arrowBtn, NSImageNameTouchBarGoUpTemplate )ViewSetAutoresizingMask( _arrowBtn, NSViewMinXMargin + NSViewMinYMargin )button _pushBtn,,, @"Toggle ToolbarItem Enabled", (334,380,203,32)ViewSetAutoresizingMask( _pushBtn, NSViewMinXMargin + NSViewMinYMargin )ColorPanelSetColor( fn ColorRed )end fnvoid local fn DoDialog( ev as long, tag as long, wnd as long )select ( ev )case _btnClickToolbarItemSetEnabled( _toolbar, _toolbarComputerItem, ( fn ToolbarItemIsEnabled( _toolbar, _toolbarComputerItem ) == NO ) )case _toolbarItemValidateselect ( tag )case _toolbarComputerItemDialogEventSetBool(fn ToolbarItemIsEnabled( _toolbar, tag ))case _toolbarColorsItemNSLog(@"here")DialogEventSetBool(NO)end selectcase _toolbarItemClickNSLog(@"toolbar item %ld clicked in window %ld",tag,wnd)case _colorPanelChangeColorend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents