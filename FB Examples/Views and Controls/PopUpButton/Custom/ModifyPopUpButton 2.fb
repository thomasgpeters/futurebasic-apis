/* CocoaUI popupbutton color attributes Ken Shmidheiser   {20180309}*/include "NSLog.incl"_window = 1_popupBtn = 1void local fn BuildWindowMenuItemRef   itemwindow _window, @"Set Button Appearance", ( 0, 0, 480, 270 )WindowSetBackgroundColor( _window, fn ColorDarkGray )popupbutton _popupBtn,,, @"Alpha;Bravo;Charlie;Delta;Echo;FutureBasic", ( 184, 150, 100, 22 )ViewSetAutoresizingMask( _popupBtn, NSViewMinXMargin + NSViewMaxYMargin )ButtonSetBezelStyle( _popupBtn, NSBezelStyleRecessed )PopUpButtonSetPreferredEdge( _popupBtn, CGRectMaxXEdge )PopUpButtonSetArrowPosition( _popupBtn, NSPopUpArrowAtBottom )CFAttributedStringRef cellStr = fn ButtonAttributedTitle( _popupBtn )CFMutableDictionaryRef cellAttr = (CFMutableDictionaryRef)fn ObjectMutableCopy( fn AttributedStringAttributesAtIndex( cellStr, 0, NULL ) )MutableDictionarySetObjectForKey( cellAttr, fn ColorGreen, NSForegroundColorAttributeName )CFArrayRef itemArray = fn PopUpButtonItemArray( _popupBtn )for item in itemArrayCFMutableAttributedStringRef title = fn MutableAttributedStringWithAttributes( fn MenuItemTitle( 0, item ), cellAttr )MenuItemSetAttributedTitle( 0, item, title )// we can send 0 to menuID param because we're using the MenuItemRef, not its idnextend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _popupBtnlong index = fn PopUpButtonIndexOfSelectedItem(tag)NSLog(@"popup button %ld item %ld selected: \"%@\"",tag,index,fn PopUpButtonTitleOfSelectedItem(tag))end selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents