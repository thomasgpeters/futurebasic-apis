include "NSLog.incl"_popMenu = 101begin enum_item0_item1_item2_item3_item4_item5end enumvoid local fn BuildPopUpMenumenu _popMenumenu _popMenu, _item0,, @"Alpha"menu _popMenu, _item1,, @"Bravo"menu _popMenu, _item2,, @"Cocoa"menu _popMenu, _item3,, @"Delta"menu _popMenu, _item4,, @"Echo"menu _popMenu, _item5,, @"FutureBasic"end fnvoid local fn ModifyPopUpButton( tag as NSInteger )NSInteger              count, indexCFAttributedStringRef  titleFontRef font = fn MenuFont( _popMenu )CFDictionaryRef dict = @{NSFontAttributeName:font,NSForegroundColorAttributeName:fn ColorBlue}count = fn PopUpButtonNumberOfItems( tag )for index = 0 to count -1title = fn AttributedStringWithAttributes( fn MenuItemTitle( _popMenu, index ), dict )MenuItemSetAttributedTitle( _popMenu, index, title )nextend fnvoid local fn BuildWindowwindow 1WindowCenter(1)WindowSetBackgroundColor( 1, fn ColorYellow )popupbutton 1,,,, (225,200,100,26)PopUpButtonSetMenu( 1, _popMenu )ButtonSetBordered( 1, NO )//PopUpButtonSetArrowPosition( 1, NSPopUpNoArrow )fn ModifyPopUpButton( 1 )end fnvoid local fn DoMenu( menuID as long, itemID as long )select ( menuID )case _popMenuNSLog(@"PopMenu item: %ld",itemID)end selectend fnfn BuildPopUpMenufn BuildWindowon menu fn DoMenuHandleEvents