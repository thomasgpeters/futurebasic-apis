include "NSLog.incl"// popup menu itemsbegin enum_fruit      // placeholder_orange     // placeholder_apple_gooseberry // placeholder_melon      // placeholderend enum_applesMenu = 102begin enum_type1_type2_type3end enum_window = 1begin enum 1_popupBtnend enumvoid local fn BuildMenusmenu _applesMenumenu _applesMenu, _type1,, @"Granny Smith"menu _applesMenu, _type2,, @"Egremont Russet"menu _applesMenu, _type3,, @"Golden Delicious"end fnvoid local fn BuildWindowwindow _window,, (0,0,480,270)popupbutton	_popupBtn,,, @"Fruit;Orange;Apple;Goosberry;Melon", (143,121,195,25), YESMenuRef m = fn PopUpButtonMenu( _popupBtn )MenuSetSubmenu( m, _apple, _applesMenu )end fnvoid local fn DoMenu( menuID as long, itemID as long )CFStringRef sselect ( menuID )case _applesMenus = fn StringWithFormat( @"%@ - %@",fn MenuTitle(menuID),fn MenuItemTitle(menuID,itemID))PopUpButtonSetTitle( _popupBtn, s )end selectend fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _popupBtnPopUpButtonSetTitle( tag, fn PopUpButtonTitleOfSelectedItem(tag) )end selectend selectend fnfn BuildMenusfn BuildWindowon menu fn DoMenuon dialog fn DoDialogHandleEvents