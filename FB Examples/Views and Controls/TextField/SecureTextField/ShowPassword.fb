_window = 1begin enum 1_secureFld_textFld_showBtnend enumvoid local fn BuildWindowwindow _window, @"SecureTextField", (0,0,360,81), NSWindowStyleMaskTitledsecuretextfield _secureFld,,, (20,40,320,21)ViewSetAutoresizingMask( _secureFld, NSViewMinYMargin + NSViewWidthSizable )textfield -_textFld,,, (20,40,320,21)ViewSetAutoresizingMask( _textFld, NSViewMinYMargin + NSViewWidthSizable )button _showBtn,,, @"Show password", (17,17,104,18), NSButtonTypeSwitchControlSetSize( _showBtn, NSControlSizeSmall )WindowMakeFirstResponder( _window, _secureFld )end fnvoid local fn DoDialog( ev as long, tag as long )select ( ev )case _btnClickselect ( tag )case _showBtnif ( fn ButtonState( _showBtn ) == NSControlStateValueOn )textfield _textFldsecuretextfield -_secureFldWindowMakeFirstResponder( _window, _textFld )elsesecuretextfield _secureFldtextfield -_textFldWindowMakeFirstResponder( _window, _secureFld )end ifend selectcase _controlTextDidChangeselect ( tag )case _secureFldControlSetStringValue( _textFld, fn ControlStringValue( tag ) )case _textFldControlSetStringValue( _secureFld, fn ControlStringValue( tag ) )end selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents