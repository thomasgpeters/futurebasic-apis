include "NSLog.incl"_window = 1begin enum 1_pc1_pc2_pc3_pc4end enumvoid local fn BuildWindowwindow _window, @"PathControl", (0,0,310,141)WindowSetContentMinSize( _window, fn CGSizeMake( 310, 141 ) )CFURLRef url = fn URLFileURLWithPath( fn StringByExpandingTildeInPath( @"~/Desktop" ) )pathcontrol _pc1,, url, (20,101,270,20)ViewSetAutoresizingMask( _pc1, NSViewMinYMargin + NSViewWidthSizable )pathcontrol _pc2,, url, (20,73,270,20)PathControlSetEditable( _pc2, NO )ViewSetFocusRingType( _pc2, NSFocusRingTypeNone )ViewSetAutoresizingMask( _pc2, NSViewMinYMargin + NSViewWidthSizable )pathcontrol _pc3,,, (20,45,270,20)PathControlSetPlaceholderString( _pc3, @"Drop a PDF file here" )ViewSetAutoresizingMask( _pc3, NSViewMinYMargin + NSViewWidthSizable )pathcontrol _pc4,, url, (17,16,140,22), NSPathStylePopUpend fnvoid local fn DoDialog( ev as long, tag as long, wndTag as long, obj as CFTypeRef )CFStringRef extselect ( tag )case _pc3select ( ev )case _pathControlValidateDropext = fn URLPathExtension( fn DialogEventURL	 )if ( fn StringIsEqual( ext, @"pdf" ) )	// only accept pdf filesDialogEventSetLong( NSDragOperationCopy )elseDialogEventSetLong( NSDragOperationNone )end ifcase _pathControlAcceptDropPathControlSetURL( tag, fn DialogEventURL )end selectcase elseselect ( ev )//case _btnClickcase _pathControlDoubleActionNSLog(@"double")end selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents