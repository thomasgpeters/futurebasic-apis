/*  Table Checkbox  Checkbox and TextField in same cell*/// identifier#define CUSTOM_IDENTIFIER @"custom"// keys#define STATE_KEY @"state"#define TEXT_KEY @"text"_window = 1begin enum 1000_tableView_tableCheckbox_tableTextFieldend enumvoid local fn MyCustomCellCallback( tag as long, identifier as CFStringRef, row as NSInteger, vw as CFTypeRef, userData as ptr )CFDictionaryRef dict = fn ArrayObjectAtIndex( fn TableViewData( tag ), row )select ( fn ViewTag( vw ) )case _tableCheckboxButtonSetState( vw, fn NumberIntegerValue( fn DictionaryObjectForKey( dict, STATE_KEY ) ) )case _tableTextFieldControlSetStringValue( vw, fn DictionaryObjectForKey( dict, TEXT_KEY ) )end selectend fnvoid local fn TableDataSetValueAtIndex( value as CFTypeRef, key as CFStringRef, index as NSInteger )CFMutableDictionaryRef dict = (CFMutableDictionaryRef)fn ArrayObjectAtIndex( fn TableViewData(_tableView), index )MutableDictionarySetObjectForKey( dict, value, key )end fnvoid local fn TableDataAddRow( state as NSInteger, txt as CFStringRef )MutableArrayAddObject( fn TableViewData(_tableView), fn ObjectMutableCopy( @{STATE_KEY:@(state),TEXT_KEY:txt} ) )end fnvoid local fn CreateTableDatafn TableDataAddRow( NSControlStateValueOn, @"All Along The Watchtower" )fn TableDataAddRow( NSControlStateValueOn, @"Ballad Of A Thin Man" )fn TableDataAddRow( NSControlStateValueOff, @"Changing Of The Guarrds" )fn TableDataAddRow( NSControlStateValueOn, @"Desolation Row" )fn TableDataAddRow( NSControlStateValueOff, @"Every Grain Of Sand" )fn TableDataAddRow( NSControlStateValueOn, @"Fourth Time Around" )fn TableDataAddRow( NSControlStateValueOff, @"Gates Of Eden" )fn TableDataAddRow( NSControlStateValueOn, @"Highway 61 Revisited" )fn TableDataAddRow( NSControlStateValueOn, @"It Takes A Lot To Laugh, It Takes A Train To Cry" )fn TableDataAddRow( NSControlStateValueOn, @"Just Like Tom Thumb's Blues" )fn TableDataAddRow( NSControlStateValueOff, @"Knockin' On Heaven's Door" )fn TableDataAddRow( NSControlStateValueOn, @"Leopard-Skin Pill-Box Hat" )fn TableDataAddRow( NSControlStateValueOff, @"Maggie's Farm" )fn TableDataAddRow( NSControlStateValueOn, @"Not Dark Yet" )fn TableDataAddRow( NSControlStateValueOff, @"One Of Us Must Know (Sooner Or Later)" )fn TableDataAddRow( NSControlStateValueOff, @"Positively 4th Street" )fn TableDataAddRow( NSControlStateValueOn, @"Quinn The Eskimo (The Mighty Quinn)" )fn TableDataAddRow( NSControlStateValueOn, @"Rainy Day Women #12 & 35" )fn TableDataAddRow( NSControlStateValueOff, @"Sign On The Window" )fn TableDataAddRow( NSControlStateValueOn, @"Tangled Up In Blue" )fn TableDataAddRow( NSControlStateValueOff, @"Up To Me" )fn TableDataAddRow( NSControlStateValueOn, @"Visions Of Johanna" )fn TableDataAddRow( NSControlStateValueOn, @"Where Are You Tonight (Journey Through Dark Heat)" )fn TableDataAddRow( NSControlStateValueOff, @"You Angel You" )TableViewReloadData( _tableView )end fnvoid local fn BuildWindownibwindow _window, @"Window"TableViewSetCustomCellCallback( _tableView, CUSTOM_IDENTIFIER, @fn MyCustomCellCallback, NULL )fn CreateTableDataend fnvoid local fn DoDialog( ev as long, tag as long, wnd as long, obj as CFTypeRef )select ( ev )case _btnClickselect ( tag )case _tableCheckboxNSInteger row = fn TableViewRowForView( _tableView, obj )fn TableDataSetValueAtIndex( @(fn ButtonState( obj )), STATE_KEY, row )end selectcase _windowWillCloseendend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents