_window = 1begin enum 1_colWell1_colWell2end enumvoid local fn BuildWindowColorRef   col1, col2window _window, @"ColorWell", (0,0,300,200), NSWindowStyleMaskTitledcol1 = fn UserDefaultsColor( @"Color1" )if ( col1 == NULL ) then col1 = fn ColorWithRGB( 1.0, 0.5, 0.0, 1.0 )col2 = fn UserDefaultsColor( @"Color2" )if ( col2 == NULL ) then col2 = fn ColorBluecolorwell _colWell1,, col1, (130,110,44,23)colorwell _colWell2,, col2, (130,70,44,23)end fnvoid local fn DoAppEvent( ev as long )select (ev)case _appWillTerminateUserDefaultsSetColor( @"Color1", fn ColorWellColor(_colWell1) )UserDefaultsSetColor( @"Color2", fn ColorWellColor(_colWell2) )case _appShouldTerminateAfterLastWindowClosedAppEventSetBool(YES)end selectend fnfn BuildWindowon appevent fn DoAppEventHandleEvents