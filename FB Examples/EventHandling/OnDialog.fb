include "NSLog.incl"void local fn DoDialog( ev as long )select (ev)case _windowShouldCloseNSLog(@"Window close blocked")DialogEventSetBool( NO )// return NO to stop window closingend selectend fnmenu 1,,, @"File"menu 1,0,, @"Close", @"w"MenuItemSetAction( 1, 0, @"performClose:" )window 1, @"Dialog Events", (0,0,550,400)textlabel 1, @"Try to close window", (18,363,175,17)on dialog fn DoDialogHandleEvents