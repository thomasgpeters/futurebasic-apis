/*  TableView.incl  Bernie Wylde 20170704  Framework: AppKit  Inherits from: Control/View/Responder/Object  NSTableView - https://developer.apple.com/documentation/appkit/nstableview?language=objc  Subclass name: TableViewSC  syntax:    tableview tag, enabled, rect, columnIdentifiers, scrollViewTag, wndTag*/// animation options#if ndef _DEFINEDINCOCOA#define NSTableViewAnimationOptions as NSUInteger#endifsystem NSTableViewAnimationOptions NSTableViewAnimationEffectNonesystem NSTableViewAnimationOptions NSTableViewAnimationEffectFadesystem NSTableViewAnimationOptions NSTableViewAnimationEffectGapsystem NSTableViewAnimationOptions NSTableViewAnimationSlideUpsystem NSTableViewAnimationOptions NSTableViewAnimationSlideDownsystem NSTableViewAnimationOptions NSTableViewAnimationSlideLeftsystem NSTableViewAnimationOptions NSTableViewAnimationSlideRight// selection highlight style#if ndef _DEFINEDINCOCOA#define NSTableViewSelectionHighlightStyle as NSInteger#endifsystem NSTableViewSelectionHighlightStyle NSTableViewSelectionHighlightStyleNonesystem NSTableViewSelectionHighlightStyle NSTableViewSelectionHighlightStyleRegularsystem NSTableViewSelectionHighlightStyle NSTableViewSelectionHighlightStyleSourceList// dragging destination feedback style#if ndef _DEFINEDINCOCOA#define NSTableViewDraggingDestinationFeedbackStyle as NSInteger#endifsystem NSTableViewDraggingDestinationFeedbackStyle NSTableViewDraggingDestinationFeedbackStyleNonesystem NSTableViewDraggingDestinationFeedbackStyle NSTableViewDraggingDestinationFeedbackStyleRegularsystem NSTableViewDraggingDestinationFeedbackStyle NSTableViewDraggingDestinationFeedbackStyleSourceListsystem NSTableViewDraggingDestinationFeedbackStyle NSTableViewDraggingDestinationFeedbackStyleGap// drop operation#if ndef _DEFINEDINCOCOA#define NSTableViewDropOperation as NSUInteger#endifsystem NSTableViewDropOperation NSTableViewDropOnsystem NSTableViewDropOperation NSTableViewDropAbove// notificationssystem CFStringRef NSTableViewColumnDidMoveNotificationsystem CFStringRef NSTableViewColumnDidResizeNotificationsystem CFStringRef NSTableViewSelectionDidChangeNotificationsystem CFStringRef NSTableViewSelectionIsChangingNotification// row cell style#if ndef _DEFINEDINCOCOA#define NSTableViewRowSizeStyle as NSInteger#endifsystem NSTableViewRowSizeStyle NSTableViewRowSizeStyleDefaultsystem NSTableViewRowSizeStyle NSTableViewRowSizeStyleCustomsystem NSTableViewRowSizeStyle NSTableViewRowSizeStyleSmallsystem NSTableViewRowSizeStyle NSTableViewRowSizeStyleMediumsystem NSTableViewRowSizeStyle NSTableViewRowSizeStyleLarge// grid style mask#if ndef _DEFINEDINCOCOA#define NSTableViewGridLineStyle as NSUInteger#endifsystem NSTableViewGridLineStyle NSTableViewGridNonesystem NSTableViewGridLineStyle NSTableViewSolidVerticalGridLineMasksystem NSTableViewGridLineStyle NSTableViewSolidHorizontalGridLineMasksystem NSTableViewGridLineStyle NSTableViewDashedHorizontalGridLineMask// autoresizing style#if ndef _DEFINEDINCOCOA#define NSTableViewColumnAutoresizingStyle as NSUInteger#endifsystem NSTableViewColumnAutoresizingStyle NSTableViewNoColumnAutoresizingsystem NSTableViewColumnAutoresizingStyle NSTableViewUniformColumnAutoresizingStylesystem NSTableViewColumnAutoresizingStyle NSTableViewSequentialColumnAutoresizingStylesystem NSTableViewColumnAutoresizingStyle NSTableViewReverseSequentialColumnAutoresizingStylesystem NSTableViewColumnAutoresizingStyle NSTableViewLastColumnOnlyAutoresizingStylesystem NSTableViewColumnAutoresizingStyle NSTableViewFirstColumnOnlyAutoresizingStyle// table view style#if ndef _DEFINEDINCOCOA#define NSTableViewStyle as NSInteger// macOS 11.0+#endifsystem NSTableViewStyle NSTableViewStyleAutomatic  // macOS 11.0+system NSTableViewStyle NSTableViewStyleFullWidth  // macOS 11.0+system NSTableViewStyle NSTableViewStyleInset      // macOS 11.0+system NSTableViewStyle NSTableViewStyleSourceList // macOS 11.0+system NSTableViewStyle NSTableViewStylePlain      // macOS 11.0+system CFStringRef TABLEVIEW_REORDER_PASTEBOARD_TYPE// used in ViewRegisterForDraggedTypes for re-order itemssystem CFStringRef TABLEVIEW_GROUP_ROW// used in tabledata dictionaries to indicate the row is a group row// dialog eventsbegin enum not output 1600// delegate_tableViewView_tableViewRowView_tableViewDidAddRowView_tableViewDidRemoveRowView_tableViewIsGroupRow//_tableViewWillDisplayCell_tableViewHeightOfRow_tableViewSizeToFitWidthOfColumn_tableViewSelectionShouldChange_tableViewShouldSelectRow_tableViewSelectionIndexes_tableViewShouldSelectTableColumn_tableViewSelectionIsChanging_tableViewSelectionDidChange_tableViewShouldTypeSelect_tableViewTypeSelectString_tableViewNextTypeSelectMatch_tableViewShouldReorderColumn_tableViewDidDragTableColumn_tableViewColumnDidMove_tableViewColumnDidResize_tableViewDidClickTableColumn_tableViewMouseDownInHeader_tableViewRowActions_tableViewUserCanChangeVisibilityOfTableColumn_tableViewUserDidChangeVisibilityOfTableColumns// datasource_tableViewNumberOfRows_tableViewPasteboardWriterForRow_tableViewAcceptDrop_tableViewValidateDrop_tableViewWriteRows_tableViewDraggingSessionWillBegin_tableViewUpdateDraggingItems_tableViewDraggingSessionEnded_tableViewSortDescriptorsDidChange// other actions_tableViewDoubleAction// special events_tableViewCellTextDidChange_tableViewCellTextDidEndEditingend enum// Classtoolbox fn TableViewClass = ClassReftoolbox TableViewEventSetNumberOfRows( NSInteger tag, NSInteger value )toolbox fn TableViewEventRow( NSInteger tag ) = NSIntegertoolbox fn TableViewEventColumn( NSInteger tag ) = NSIntegertoolbox fn TableViewEventColumnIdentifier( NSInteger tag ) = CFStringReftoolbox fn TableViewEventCellView( NSInteger tag ) = ViewReftoolbox TableViewEventSetCellView( NSInteger tag, TableCellViewRef aView )toolbox fn TableViewEventCellIdentifier( NSInteger tag ) = CFStringReftoolbox fn TableViewEventCellString( NSInteger tag ) = CFStringReftoolbox TableViewEventSetCellString( NSInteger tag, CFStringRef string )toolbox fn TableViewEventCellImage( NSInteger tag ) = ImageReftoolbox TableViewEventSetCellImage( NSInteger tag, ImageRef image )toolbox fn TableViewEventDropOperation( NSInteger tag ) = NSTableViewDropOperationtoolbox TableViewEventSetDropOperation( NSInteger tag, NSTableViewDropOperation operation )toolbox fn TableViewWithTag( NSInteger tag ) = TableViewReftoolbox fn TableViewExists( NSInteger tag ) = BOOL// Inittoolbox fn TableViewInit( NSInteger tag, CGRect r ) = TableViewRef// autoreleased// Data sourcetoolbox fn TableViewUsesStaticContents( NSInteger tag ) = BOOLtoolbox TableViewSetUsesStaticContents( NSInteger tag, BOOL flag )toolbox TableViewReloadData( NSInteger tag )toolbox TableViewReloadDataForRowsColumns( NSInteger tag, IndexSetRef rows, IndexSetRef columns )// Create viewstoolbox fn TableViewMakeViewWithIdentifier( NSInteger tag, CFStringRef identifier ) = ViewReftoolbox fn TableViewRowViewAtRow( NSInteger tag, NSInteger row, BOOL makeIfNecessary ) = TableRowViewReftoolbox fn TableViewViewAtColumnRow( NSInteger tag, NSInteger column, NSInteger row, BOOL makeIfNecessary ) = ViewRef// Updatetoolbox TableViewBeginUpdates( NSInteger tag )toolbox TableViewEndUpdates( NSInteger tag )toolbox TableViewMoveRow( NSInteger tag, NSInteger atIndex, NSInteger toIndex )toolbox TableViewInsertRows( NSInteger tag, IndexSetRef indexes, NSTableViewAnimationOptions animation )toolbox TableViewRemoveRows( NSInteger tag, IndexSetRef indexes, NSTableViewAnimationOptions animation )toolbox fn TableViewRowForView( NSInteger tag, ViewRef aView ) = NSIntegertoolbox fn TableViewColumnForView( NSInteger tag, ViewRef aView ) = NSInteger// Nib file registration// registerNib// registeredNibs// Target-actiontoolbox fn TableViewClickedColumn( NSInteger tag ) = NSIntegertoolbox fn TableViewClickedRow( NSInteger tag ) = NSInteger// Behaviortoolbox fn TableViewAllowsColumnReordering( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsColumnReordering( NSInteger tag, BOOL flag )toolbox fn TableViewAllowsColumnResizing( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsColumnResizing( NSInteger tag, BOOL flag )toolbox fn TableViewAllowsMultipleSelection( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsMultipleSelection( NSInteger tag, BOOL flag )toolbox fn TableViewAllowsEmptySelection( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsEmptySelection( NSInteger tag, BOOL flag )toolbox fn TableViewAllowsColumnSelection( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsColumnSelection( NSInteger tag, BOOL flag )toolbox fn TableViewUsesAutomaticRowHeights( NSInteger tag ) = BOOLtoolbox TableViewSetUsesAutomaticRowHeights( NSInteger tag, BOOL flag ) // Display attributestoolbox fn TableViewIntercellSpacing( NSInteger tag ) = CGSizetoolbox TableViewSetIntercellSpacing( NSInteger tag, CGSize spacing )toolbox fn TableViewRowHeight( NSInteger tag ) = CGFloattoolbox TableViewSetRowHeight( NSInteger tag, CGFloat height )toolbox fn TableViewBackgroundColor( NSInteger tag ) = ColorReftoolbox TableViewSetBackgroundColor( NSInteger tag, ColorRef col )toolbox fn TableViewUsesAlternatingRowBackgroundColors( NSInteger tag ) = BOOLtoolbox TableViewSetUsesAlternatingRowBackgroundColors( NSInteger tag, BOOL flag )toolbox fn TableViewSelectionHighlightStyle( NSInteger tag ) = NSTableViewSelectionHighlightStyletoolbox TableViewSetSelectionHighlightStyle( NSInteger tag, NSTableViewSelectionHighlightStyle style )toolbox fn TableViewGridColor( NSInteger tag ) = ColorReftoolbox TableViewSetGridColor( NSInteger tag, ColorRef col )toolbox fn TableViewGridStyleMask( NSInteger tag ) = NSTableViewGridLineStyletoolbox TableViewSetGridStyleMask( NSInteger tag, NSTableViewGridLineStyle style )toolbox fn TableViewIndicatorImageInTableColumn( NSInteger tag, TableColumnRef columnRef ) = ImageReftoolbox TableViewSetIndicatorImageInTableColumn( NSInteger tag, ImageRef image, TableColumnRef columnRef )// Row size stylestoolbox fn TableViewEffectiveRowSizeStyle( NSInteger tag ) = NSTableViewRowSizeStyletoolbox fn TableViewRowSizeStyle( NSInteger tag ) = NSTableViewRowSizeStyletoolbox TableViewSetRowSizeStyle( NSInteger tag, NSTableViewRowSizeStyle style )// Column managementtoolbox TableViewAddTableColumn( NSInteger tag, TableColumnRef columnRef )toolbox TableViewRemoveTableColumn( NSInteger tag, TableColumnRef columnRef )toolbox TableViewMoveColumn( NSInteger tag, NSInteger atIndex, NSInteger toIndex )toolbox fn TableViewTableColumns( NSInteger tag ) = CFArrayReftoolbox fn TableViewColumnWithIdentifier( NSInteger tag, CFStringRef identifier ) = NSIntegertoolbox fn TableViewTableColumnWithIdentifier( NSInteger tag, CFStringRef identifier ) = TableColumnRef// Selecting columns and rowstoolbox TableViewSelectColumns( NSInteger tag, IndexSetRef columnIndexes, BOOL extendSelection )toolbox fn TableViewSelectedColumn( NSInteger tag ) = NSIntegertoolbox fn TableViewSelectedColumns( NSInteger tag ) = IndexSetReftoolbox TableViewDeselectColumn( NSInteger tag, NSInteger columnIndex )toolbox fn TableViewNumberOfSelectedColumns( NSInteger tag ) = NSIntegertoolbox fn TableViewIsColumnSelected( NSInteger tag, NSInteger columnIndex ) = BOOLtoolbox TableViewSelectRows( NSInteger tag, IndexSetRef rowIndexes, BOOL extendSelection )toolbox TableViewSelectRow( NSInteger tag, NSInteger rowIndex )toolbox fn TableViewSelectedRow( NSInteger tag ) = NSIntegertoolbox fn TableViewSelectedRowIndexes( NSInteger tag ) = IndexSetReftoolbox TableViewDeselectRow( NSInteger tag, NSInteger row )toolbox fn TableViewNumberOfSelectedRows( NSInteger tag ) = NSIntegertoolbox fn TableViewIsRowSelected( NSInteger tag, NSInteger row ) = BOOLtoolbox TableViewSelectAll( NSInteger tag )toolbox TableViewDeselectAll( NSInteger tag )// Enumerating rows/*  TableViewEnumerateAvailableRowViews  callback example:    void local fn MyEnumerateAvailableRowViews( tag as NSInteger, rowView as TableRowViewRef, row as NSInteger, userData as ptr )      // ...    end fn*/toolbox TableViewEnumerateAvailableRowViews( NSInteger tag, ptr callback, ptr userData )// Type selecttoolbox fn TableViewAllowsTypeSelect( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsTypeSelect( NSInteger tag, BOOL flag )toolbox fn TableViewStyle( NSInteger tag ) = NSTableViewStyle          // macOS 11.0+toolbox TableViewSetStyle( NSInteger tag, NSTableViewStyle style )     // macOS 11.0+toolbox fn TableViewEffectiveStyle( NSInteger tag ) = NSTableViewStyle // macOS 11.0+// Dimensionstoolbox fn TableViewNumberOfColumns( NSInteger tag ) = NSInteger// Floating rowstoolbox fn TableViewFloatsGroupRows( NSInteger tag ) = BOOLtoolbox TableViewSetFloatsGroupRows( NSInteger tag, BOOL flag )// Editing cellstoolbox TableViewEditColumnRow( NSInteger tag, NSInteger columnIndex, NSInteger row, BOOL selectFlag )// Auxiliary viewstoolbox fn TableViewHeaderView( NSInteger tag ) = TableHeaderViewReftoolbox TableViewSetHeaderView( NSInteger tag, TableHeaderViewRef headerView )toolbox fn TableViewCornerView( NSInteger tag ) = ViewReftoolbox TableViewSetCornerView( NSInteger tag, ViewRef cornerView )// Layout supporttoolbox fn TableViewUserInterfaceLayoutDirection( NSInteger tag ) = NSUserInterfaceLayoutDirectiontoolbox TableViewSetUserInterfaceLayoutDirection( NSInteger tag, NSUserInterfaceLayoutDirection direction ) toolbox fn TableViewRectOfColumn( NSInteger tag, NSInteger col ) = CGRecttoolbox fn TableViewRectOfRow( NSInteger tag, NSInteger row ) = CGRecttoolbox fn TableViewRowsInRect( NSInteger tag, CGRect r ) = CFRangetoolbox fn TableViewColumnIndexesInRect( NSInteger tag, CGRect r ) = IndexSetReftoolbox fn TableViewColumnAtPoint( NSInteger tag, CGPoint pt ) = NSIntegertoolbox fn TableViewRowAtPoint( NSInteger tag, CGPoint pt ) = NSIntegertoolbox fn TableViewFrameOfCell( NSInteger tag, NSInteger col, NSInteger row ) = CGRecttoolbox fn TableViewColumnAutoresizingStyle( NSInteger tag ) = NSTableViewColumnAutoresizingStyletoolbox TableViewSetColumnAutoresizingStyle( NSInteger tag, NSTableViewColumnAutoresizingStyle style )toolbox TableViewSizeLastColumnToFit( NSInteger tag )toolbox TableViewTile( NSInteger tag )toolbox TableViewSizeToFit( NSInteger tag )toolbox TableViewNoteHeightOfRowsWithIndexesChanged( NSInteger tag, IndexSetRef indexSet )// Drawing// Scrollingtoolbox TableViewScrollRowToVisible( NSInteger tag, NSInteger row )toolbox TableViewScrollColumnToVisible( NSInteger tag, NSInteger col )// Column state persistencetoolbox fn TableViewAutosaveColumns( NSInteger tag ) = BOOLtoolbox TableViewSetAutosaveColumns( NSInteger tag, BOOL flag )toolbox fn TableViewAutosaveName( NSInteger tag ) = CFStringReftoolbox TableViewSetAutosaveName( NSInteger tag, CFStringRef name )// Highlightable column headerstoolbox fn TableViewHighlightedTableColumn( NSInteger tag ) = TableColumnReftoolbox TableViewSetHighlightedTableColumn( NSInteger tag, TableColumnRef columnRef )// Dragging// ...toolbox fn TableViewCanDragRows( NSInteger tag, IndexSetRef rowIndexes, CGPoint atPoint ) = BOOLtoolbox TableViewSetDraggingSourceOperationMask( NSInteger tag, NSDragOperation dragOperation, BOOL forLocal )toolbox fn TableViewVerticalMotionCanBeginDrag( NSInteger tag ) = BOOLtoolbox TableViewSetVerticalMotionCanBeginDrag( NSInteger tag, BOOL flag )toolbox fn TableViewDraggingDestinationFeedbackStyle( NSInteger tag ) = NSTableViewDraggingDestinationFeedbackStyletoolbox TableViewSetDraggingDestinationFeedbackStyle( NSInteger tag, NSTableViewDraggingDestinationFeedbackStyle style )toolbox TableViewSetDropRow( NSInteger tag, NSInteger row, NSTableViewDropOperation operation )// Sortingtoolbox fn TableViewSortDescriptors( NSInteger tag ) = CFArrayReftoolbox TableViewSetSortDescriptors( NSInteger tag, CFArrayRef descriptors )// Row actionstoolbox fn TableViewRowActionsVisible( NSInteger tag ) = BOOLtoolbox TableViewSetRowActionsVisible( NSInteger tag, BOOL flag )// Hiding and showing rowstoolbox TableViewHideRow( NSInteger tag, NSInteger rowIndex, NSTableViewAnimationOptions animation )     toolbox TableViewHideRows( NSInteger tag, IndexSetRef indexes, NSTableViewAnimationOptions animation )   toolbox TableViewUnhideRow( NSInteger tag, NSInteger rowIndex, NSTableViewAnimationOptions animation )   toolbox TableViewUnhideRows( NSInteger tag, IndexSetRef indexes, NSTableViewAnimationOptions animation ) toolbox fn TableViewHiddenRowIndexes( NSInteger tag ) = IndexSetRef                                      /*  Convenience funtions*/toolbox fn TableViewData( NSInteger tag ) = CFMutableArrayReftoolbox TableViewSetData( NSInteger tag, CFMutableArrayRef array )toolbox fn TableViewView( NSInteger tag, NSInteger row, NSInteger col ) = ptrtoolbox TableViewSetDelegateCallback( NSInteger tag, ptr callback )/*  TableViewSetCustomCellCallback( tag, identifiers, callback, userData )    identifiers parameter can be:      a string containing one identifier        or      a semicolon-delimited string of identifiers        or      an array of identifiers  callback example:    void local fn MyCustomCellCallbacl( tag as long, identifier as CFStringRef, row as NSInteger, customView as CFTypeRef, userData as ptr )      // ...    end fn*/toolbox TableViewSetCustomCellCallback( NSInteger tag, CFTypeRef identifiers, ptr callback, ptr userData )//toolbox fn TableViewViewAtRow( NSInteger tag, NSInteger row, NSInteger vwTag ) = ViewReftoolbox TableViewCellMakeFirstResponder( NSInteger tag, NSInteger row, NSInteger col )toolbox TableViewSetHeaderFont( NSInteger tag, FontRef font )                                                toolbox TableViewSetHeaderTextColor( NSInteger tag, ColorRef txtColor )                                      toolbox TableViewSetColumnHeaderFont( NSInteger tag, CFStringRef columnIdentifier, FontRef font )            toolbox TableViewSetColumnHeaderTextColor( NSInteger tag, CFStringRef columnIdentifier, ColorRef textColor ) toolbox fn TableViewTextColor( NSInteger tag ) = ColorReftoolbox TableViewSetTextColor( NSInteger tag, ColorRef txtColor )toolbox fn TableViewDropOperation( NSInteger tag ) = NSTableViewDropOperationtoolbox TableViewSetDropOperation( NSInteger tag, NSTableViewDropOperation dropOperation )toolbox fn TableViewAllowsDragCopy( NSInteger tag ) = BOOLtoolbox TableViewSetAllowsDragCopy( NSInteger tag, BOOL flag )/*  Data source callbacks    type param         _tableViewNumberOfRows      _tableViewPasteboardWriterForRow      _tableViewAcceptDrop      _tableViewValidateDrop      _tableViewWriteRows      _tableViewDraggingSessionWillBegin      _tableViewUpdateDraggingItems      _tableViewDraggingSessionEnded      _tableViewSortDescriptorsDidChange  local fn MyTableViewAcceptDropCallback( tag as NSInteger, info as DraggingInfoRef, row as NSInteger, dropOperation as NSTableViewDropOperation, userData as ptr ) as BOOL  end fn = YES  local fn MyTableViewValidateDropCallback( tag as NSInteger, info as DraggingInfoRef, proposedRow as NSInteger, proposedDropOperation as NSTableViewDropOperation, userData as ptr ) as NSDragOperation    NSDragOperation   operation : operation = NSDragOperationLink  end fn = = operation  local fn MyTableViewWriteRowsCallback( tag as NSInteger, rowIndexes as IndexSetRef, pb as PasteboardRef ) as BOOL  end fn = YES  void local fn MyTableViewDraggingSessionEndedCallback( tag as NSInteger, session as DraggingSessionRef, screenPoint as CGPoint, operation as NSDragOperation, userData as ptr )  end fn*/